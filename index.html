<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ç¦å²¡æ—…è¡Œ</title>

  <!-- PWA / iPhone -->
  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" href="/icons/icon-180.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="ç¦å²¡æ—…è¡Œ" />
  <meta name="theme-color" content="#b91c1c" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* 3æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚° */
    #mapDialog { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.45); z-index:1000; }
    #mapDialog .panel { width:92%; max-width:340px; background:#fff; border-radius:16px; padding:16px 16px 12px; box-shadow:0 10px 25px rgba(0,0,0,.18); }
    #mapDialog h3 { font-size:16px; font-weight:600; margin:4px 0 10px; word-break:keep-all; }
    #mapDialog .btn { width:100%; border:none; border-radius:10px; padding:12px 14px; font-size:15px; margin-top:8px; }
    #mapDialog .google { background:#4285F4; color:#fff; }
    #mapDialog .apple  { background:#111; color:#fff; }
    #mapDialog .cancel { background:#e5e7eb; color:#111; }
  </style>
</head>
<body class="bg-gray-100 text-gray-900">
  <!-- 3æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
  <div id="mapDialog" onclick="closeDialog()">
    <div class="panel" onclick="event.stopPropagation()">
      <div class="text-xs text-gray-500">åœ°å›³ã‚’é–‹ã</div>
      <h3 id="mapPlace">å ´æ‰€å</h3>
      <button class="btn google" onclick="goGoogle()">Google Map</button>
      <button class="btn apple"  onclick="goApple()">Apple Map</button>
      <button class="btn cancel" onclick="closeDialog()">æˆ»ã‚‹</button>
    </div>
  </div>

  <div id="root"></div>

  <script type="text/babel">
    const { useEffect } = React;

    // ===== å…±æœ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ =====
    const gSearch = (q) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`;
    const aSearch = (q) => `https://maps.apple.com/?q=${encodeURIComponent(q)}`;

    // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°åˆ¶å¾¡
    let currentPlace = "";
    window.openMapDialog = (place) => {
      currentPlace = place;
      document.getElementById("mapPlace").innerText = place;
      document.getElementById("mapDialog").style.display = "flex";
    };
    window.closeDialog = () => {
      document.getElementById("mapDialog").style.display = "none";
      currentPlace = "";
    };
    window.goGoogle = () => { window.open(gSearch(currentPlace), "_blank"); closeDialog(); };
    window.goApple  = () => { window.open(aSearch(currentPlace), "_blank"); closeDialog(); };

    // ===== å€™è£œãƒªã‚¹ãƒˆ =====
    // Day2/Day3 æ˜¼ï¼ˆä¾é ¼ã®5ä»¶ï¼‰
    const day2_3LunchCandidates = [
      { name: "å…ƒç¥– åšå¤šã‚ã‚“ãŸã„é‡" },
      { name: "åšå¤šã‚·ãƒ¼ãƒ•ãƒ¼ãƒ‰ ã†ãŠç”°" },
      { name: "é­šãƒˆè‚´ ã„ã¨ãŠã‹ã—ï¼ˆæ˜¥å‰ï¼‰" },
      { name: "ã²ã—ã‚€ã‚‰ï¼ˆæ˜¥å‰ï¼‰" },
      { name: "å¤§åœ°ã®ã†ã©ã‚“ åšå¤šé§…ã¡ã‹ã¦ã‚“ï¼ˆæœæ—¥ãƒ“ãƒ«B2ï¼‰" },
    ];

    // Day1 ç©ºæ¸¯å†…ï¼ˆ10äººä»¥ä¸ŠOKï¼‰
    const airportLunchCandidates = [
      { name: "ç«¹ä¹ƒå±‹ ç¦å²¡ç©ºæ¸¯åº—" },
      { name: "ãƒ©ãƒ¼ãƒ¡ãƒ³æ»‘èµ°è·¯ï¼ˆãƒ•ãƒ¼ãƒ‰ãƒ›ãƒ¼ãƒ«ï¼‰" },
      { name: "å› å¹¡ã†ã©ã‚“ï¼ˆç¦å²¡ç©ºæ¸¯ï¼‰" },
      { name: "ã†ã¾ã‚„ ç¦å²¡ç©ºæ¸¯åº—" },
      { name: "B.B.Quisineï¼ˆå›½å†…ç·š3Fï¼‰" },
    ];

    // ===== ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆçµµæ–‡å­—ã‚ã‚Šãƒ»ã‚¯ãƒ©ã‚·ãƒƒã‚¯ï¼‰=====
    const timeline = [
      {
        day: "Day 1 (9/19 é‡‘)",
        events: [
          { time: "12:10", title: "ğŸ›« åå¤å±‹ç™ºï¼ˆé£›è¡Œæ©Ÿï¼‰", detail: "12:10 â†’ 13:35", hideMaps: true },
          { time: "12:15", title: "ğŸ›« æ±äº¬ç™ºï¼ˆé£›è¡Œæ©Ÿï¼‰",   detail: "12:15 â†’ 14:10", hideMaps: true },

          { time: "15:00", title: "ğŸ´ ãŠæ˜¼", detail: "ç©ºæ¸¯å†…ã®å€™è£œï¼ˆ10äººä»¥ä¸ŠOKï¼‰",
            candidates: airportLunchCandidates },

          { time: "16:00", title: "ğŸ¨ ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³",
            detail: "HOTEL ç²‹ - sui - HARUYOSHIï¼ˆæ—§Grand Base Fukuokaï¼‰",
            mapsQ: "HOTEL ç²‹ - sui - HARUYOSHI" },

          { time: "16:30", title: "ğŸš´ è‡ªè»¢è»Šè¦³å…‰",
            detail: "å¤§æ¿ å…¬åœ’ / ç¦å²¡åŸè·¡ / åšå¤šãƒãƒ¼ãƒˆã‚¿ãƒ¯ãƒ¼ / æ«›ç”°ç¥ç¤¾ / æ‰¿å¤©å¯ºé€šã‚Š ãªã©",
            candidates: [
              { name: "å¤§æ¿ å…¬åœ’" },
              { name: "ç¦å²¡åŸè·¡ï¼ˆèˆé¶´å…¬åœ’ï¼‰" },
              { name: "åšå¤šãƒãƒ¼ãƒˆã‚¿ãƒ¯ãƒ¼" },
              { name: "æ«›ç”°ç¥ç¤¾" },
              { name: "æ‰¿å¤©å¯ºé€šã‚Š" },
            ] },

          { time: "20:30", title: "ğŸ² å¤œã”é£¯",
            detail: "å…ƒç¥– ã‚‚ã¤é‹ æ¥½å¤©åœ° å¤©ç¥æœ¬åº—ï¼ˆã‚¢ã‚¯ãƒ­ã‚¹ç¦å²¡ B2Fï¼‰",
            mapsQ: "å…ƒç¥– ã‚‚ã¤é‹ æ¥½å¤©åœ° å¤©ç¥æœ¬åº—" },

          { time: "22:00", title: "ğŸ•’ è‡ªç”±æ™‚é–“", hideMaps: true },
        ]
      },
      {
        day: "Day 2 (9/20 åœŸ)",
        events: [
          { time: "12:00", title: "ğŸ´ ãŠæ˜¼ï¼ˆå€™è£œï¼‰", detail: "å€™è£œã‹ã‚‰é¸æŠ",
            candidates: day2_3LunchCandidates },

          { time: "14:00", title: "ğŸ¯ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£",
            detail: "EXBAR TOKYO plus åšå¤šï¼ˆã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£åšå¤š 5Fï¼‰",
            mapsQ: "EXBAR TOKYO plus åšå¤š" },

          { time: "18:00", title: "ğŸº å¤œã”é£¯",
            detail: "æµ·é®®å±…é…’å±‹ ã¾ã‚‹å®¶ è¥¿ä¸­æ´²",
            mapsQ: "æµ·é®®å±…é…’å±‹ ã¾ã‚‹å®¶ è¥¿ä¸­æ´²" },

          { time: "20:00", title: "ğŸ¸ 2ä»¶ç›®ï¼ˆæœªå®šï¼‰", hideMaps: true },
          { time: "22:00", title: "ğŸ•’ è‡ªç”±æ™‚é–“", hideMaps: true },
        ]
      },
      {
        day: "Day 3 (9/21 æ—¥)",
        events: [
          { time: "12:00", title: "ğŸ´ ãŠæ˜¼ï¼ˆå€™è£œï¼‰", detail: "å€™è£œã‹ã‚‰é¸æŠ",
            candidates: day2_3LunchCandidates },

          { time: "13:00", title: "ğŸ›ï¸ ç©ºæ¸¯ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ï¼ˆãŠåœŸç”£ï¼‰",
            candidates: [
              { name: "ANA FESTAï¼ˆå›½å†…ç·šï¼‰" },
              { name: "åšå¤šéŠ˜å“è”µ" },
              { name: "ãã‚‰ã‚‚ãƒ¼ã‚‹å•†åº—" },
              { name: "ç¦å¤ªéƒï¼ˆæ˜å¤ªå­ï¼‰" },
              { name: "æ±é›²å ‚ï¼ˆã«ã‚ã‹ã›ã‚“ãºã„ï¼‰" },
            ] },

          { time: "14:15", title: "ğŸ›¬ æ±äº¬çµ„ å¸°ã‚Šï¼ˆé£›è¡Œæ©Ÿï¼‰", detail: "14:15 â†’ 16:05", hideMaps: true },
          { time: "14:50", title: "ğŸ›¬ åå¤å±‹çµ„ å¸°ã‚Šï¼ˆé£›è¡Œæ©Ÿï¼‰", detail: "14:50 â†’ 16:40", hideMaps: true },
        ]
      }
    ];

    // ===== UI =====
    const Pill = ({ children, onClick }) => (
      <button
        onClick={onClick}
        className="inline-block px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm"
      >
        {children}
      </button>
    );

    /* --- ãƒ‰ãƒƒãƒˆä½ç½®ã¨ç¸¦ç·šã‚’å®‰å®šã•ã›ã‚‹ãŸã‚ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ --- */
    const VLINE_LEFT_PX = 24; // ç¸¦ç·šã®å·¦ä½ç½®(px)
    const DOT_LEFT_PX   = 22; // ãƒ‰ãƒƒãƒˆã®å·¦ä½ç½®(px)ï¼ç¸¦ç·šã®ä¸­å¿ƒå¯„ã›

    function EventCard({ time, title, detail, mapsQ, hideMaps, candidates }) {
      return (
        <div className="mb-8 relative">
          {/* é’ã„ç‚¹ï¼šç¸¦ç·šã®ä¸­å¿ƒã«æ¥ã‚‹ã‚ˆã† left ã‚’å›ºå®š */}
          <div
            className="absolute bg-blue-600 rounded-full"
            style={{ left: `${DOT_LEFT_PX}px`, top: '16px', width: '12px', height: '12px' }}
          ></div>

          <div className="flex items-start gap-4">
            <div className="w-16 shrink-0 text-right font-bold text-gray-800 pt-1">{time}</div>
            <div className="flex-1 bg-white rounded-2xl shadow p-4">
              <div className="font-semibold text-gray-900 text-lg">{title}</div>
              {detail && <div className="text-sm text-gray-600 mt-1">{detail}</div>}

              {/* å›ºå®šã‚¹ãƒãƒƒãƒˆ â†’ ã€Œåœ°å›³ã‚’é–‹ãã€1ãƒœã‚¿ãƒ³ï¼ˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°3æŠï¼‰ */}
              {!hideMaps && mapsQ && (
                <div className="mt-3">
                  <Pill onClick={() => openMapDialog(mapsQ)}>åœ°å›³ã‚’é–‹ã</Pill>
                </div>
              )}

              {/* å€™è£œï¼ˆãƒ”ãƒ«å‹ãƒ»ã‚¿ãƒƒãƒ—ã§3æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼‰ */}
              {candidates && (
                <div className="mt-3">
                  <div className="text-xs text-gray-500 mb-2">å€™è£œï¼ˆã‚¿ãƒƒãƒ—ã§ãƒãƒƒãƒ—ã‚’é¸æŠï¼‰</div>
                  <div className="flex flex-wrap gap-2">
                    {candidates.map((s, i) => (
                      <Pill key={i} onClick={() => openMapDialog(s.name)}>{s.name}</Pill>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>
        </div>
      );
    }

    function App() {
      useEffect(() => {
        if ("serviceWorker" in navigator) {
          navigator.serviceWorker.register("/sw.js").catch(()=>{});
        }
      }, []);

      return (
        <div
          className="p-6 md:p-8 pt-12 sm:pt-14 w-full min-h-screen flex flex-col items-center"
          style={{ paddingTop: `calc(env(safe-area-inset-top, 0px) + 16px)` }}
        >
          <h1 className="text-3xl font-bold tracking-wide">ç¦å²¡æ—…è¡Œ</h1>
          <p className="text-sm text-gray-600 mb-6">æœŸé–“ï¼š2025.09.19 - 2025.09.21</p>

          <div className="w-full max-w-4xl">
            {timeline.map((d, idx) => (
              <div key={idx} className="mb-12">
                <h2 className="text-xl font-semibold mb-6 border-b pb-2">{d.day}</h2>

                {/* ç¸¦ç·šã¯ absolute ã§ 1æœ¬ã ã‘æ•·ãï¼ˆå…¨ã‚¤ãƒ™ãƒ³ãƒˆã§ä½ç½®ã‚’å›ºå®šï¼‰ */}
                <div className="relative pl-12">
                  <div
                    className="absolute bg-gray-300"
                    style={{ left: `${VLINE_LEFT_PX}px`, top: 0, bottom: 0, width: '2px' }}
                  ></div>

                  {d.events.map((ev, i) => <EventCard key={i} {...ev} />)}
                </div>
              </div>
            ))}
          </div>

          <footer className="mt-4 text-xs text-gray-500 text-center pb-10">
            ğŸ“Œ iPhoneã§ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ï¼šSafariã§é–‹ã â†’ å…±æœ‰ï¼ˆâ–¡ã«â†‘ï¼‰â†’ <b>ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ </b>
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
