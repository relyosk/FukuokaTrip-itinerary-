<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Á¶èÂ≤°ÊóÖË°å</title>

  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" href="/icons/icon-180.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Á¶èÂ≤°ÊóÖË°å" />
  <meta name="theme-color" content="#b91c1c" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* 3Êäû„ÉÄ„Ç§„Ç¢„É≠„Ç∞ */
    #mapDialog{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:1000}
    #mapDialog .panel{width:92%;max-width:360px;background:#fff;border-radius:16px;padding:16px 16px 12px;box-shadow:0 10px 25px rgba(0,0,0,.18)}
    #mapDialog h3{font-size:16px;font-weight:600;margin:4px 0 10px;word-break:keep-all}
    #mapDialog .btn{width:100%;border:none;border-radius:10px;padding:12px 14px;font-size:15px;margin-top:8px}
    #mapDialog .google{background:#4285F4;color:#fff}
    #mapDialog .apple{background:#111;color:#fff}
    #mapDialog .cancel{background:#e5e7eb;color:#111}
  </style>
</head>
<body class="bg-gray-100 text-gray-900">
  <!-- 3Êäû„ÉÄ„Ç§„Ç¢„É≠„Ç∞ -->
  <div id="mapDialog" onclick="closeDialog()">
    <div class="panel" onclick="event.stopPropagation()">
      <div class="text-xs text-gray-500">Âú∞Âõ≥„ÇíÈñã„Åè</div>
      <h3 id="mapPlace">Â†¥ÊâÄÂêç</h3>
      <button class="btn google" onclick="goGoogle()">Google Map</button>
      <button class="btn apple"  onclick="goApple()">Apple Map</button>
      <button class="btn cancel" onclick="closeDialog()">Êàª„Çã</button>
    </div>
  </div>

  <div id="root"></div>

  <script type="text/babel">
  const { useEffect } = React;

  /* ---- „É¨„Ç§„Ç¢„Ç¶„ÉàÂÆöÊï∞ÔºàÊôÇÈñìÂàó/„É¨„Éº„É´Âàó„ÅÆÂπÖÔºâ ---- */
  const TIME_COL = 72;   // px
  const RAIL_COL = 20;   // pxÔºà‰∏≠Â§Æ„Å´„É¨„Éº„É´„ÄÅ‰∏∏„ÅÆÁõ¥ÂæÑ12pxÔºâ
  const GRID_GAP = 16;   // ÂàóÈñì„ÅÆÈöôÈñì
  const RAIL_OFFSET = -1; // Ê∞¥Âπ≥ÊñπÂêë„ÅÆÂæÆË™øÊï¥Ôºà-2„Äú+2Ôºâ
  const RAIL_LEFT_PX = TIME_COL + GRID_GAP + (RAIL_COL / 2) + RAIL_OFFSET;

  /* ---- „Éû„ÉÉ„ÉóURL„Éì„É´„ÉÄ„ÉºÔºàÂÆâÂÆöÂÑ™ÂÖàÔºâ ---- */
  // Âèó„ÅëÂèñ„ÇäÂΩ¢Âºè:
  //  ÊñáÂ≠óÂàó: "Â∫óÂêç"ÔºàÊ§úÁ¥¢„Å´„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºâ
  //  „Ç™„Éñ„Ç∏„Çß„ÇØ„Éà:
  //   { label, coords:{lat,lng}, placeId, g, a }
  //   - g/a „ÅØÂÆåÂÖ®URL„ÇíÁõ¥ÊåáÂÆöÔºàÊúÄÂÑ™ÂÖàÔºâ
  //   - placeId „Åå„ÅÇ„Çå„Å∞ Google „ÅØ place_id „ÇíÂÑ™ÂÖà
  //   - coords „Åå„ÅÇ„Çå„Å∞ ‰∏°ËÄÖ„Å®„ÇÇÂ∫ßÊ®ô„ÅßÂõ∫ÂÆöÔºàApple„ÅØ ?ll=lat,lng&q=labelÔºâ
  const gSearch = (q) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`;
  const aSearch = (q) => `https://maps.apple.com/?q=${encodeURIComponent(q)}`;
  const isUrl = (v) => typeof v === "string" && /^https?:\/\//i.test(v);

  function toResolvedTarget(input) {
    if (typeof input === "string") {
      return {
        label: input,
        g: gSearch(input),
        a: aSearch(input),
      };
    }
    const { label = "Â†¥ÊâÄ", g, a, placeId, coords, q } = (input || {});
    // ÂÆåÂÖ®URL„Åå„ÅÇ„Çå„Å∞ÊúÄÂÑ™ÂÖà„ÅßÈÄö„Åô
    if (g || a) {
      return {
        label,
        g: g || (q ? gSearch(q) : gSearch(label)),
        a: a || (q ? aSearch(q) : aSearch(label)),
      };
    }
    // placeId ÂÑ™ÂÖàÔºàGoogleÔºâ
    if (placeId) {
      const gUrl =
        `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(label)}&query_place_id=${encodeURIComponent(placeId)}`;
      return {
        label,
        g: gUrl,
        a: coords ? `https://maps.apple.com/?ll=${coords.lat},${coords.lng}&q=${encodeURIComponent(label)}`
                  : aSearch(label),
      };
    }
    // Â∫ßÊ®ô„Åå„ÅÇ„Çå„Å∞Â∫ßÊ®ôÂõ∫ÂÆö
    if (coords && typeof coords.lat === "number" && typeof coords.lng === "number") {
      return {
        label,
        g: `https://www.google.com/maps/search/?api=1&query=${coords.lat},${coords.lng}`,
        a: `https://maps.apple.com/?ll=${coords.lat},${coords.lng}&q=${encodeURIComponent(label)}`
      };
    }
    // „Åù„Çå„ÇÇÁÑ°„Åë„Çå„Å∞ÂêçÁß∞Ê§úÁ¥¢
    return { label, g: gSearch(q || label), a: aSearch(q || label) };
  }

  // „ÉÄ„Ç§„Ç¢„É≠„Ç∞Âà∂Âæ°
  let currentTarget = { label:"", g:"", a:"" };
  window.openMapDialog = (placeOrObj) => {
    currentTarget = toResolvedTarget(placeOrObj);
    document.getElementById("mapPlace").innerText = currentTarget.label || "Â†¥ÊâÄ";
    document.getElementById("mapDialog").style.display = "flex";
  };
  window.closeDialog = () => {
    document.getElementById("mapDialog").style.display = "none";
    currentTarget = { label:"", g:"", a:"" };
  };
  window.goGoogle = () => { window.open(currentTarget.g, "_blank"); closeDialog(); };
  window.goApple  = () => { window.open(currentTarget.a, "_blank"); closeDialog(); };

  /* ---- „Éá„Éº„Çø ---- */
  // ‚Äª Â∫ßÊ®ô„ÅåÂà§Êòé„Åó„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„ÅØ coords „ÇíË®≠ÂÆöÔºàÂêçÁß∞„ÅåÂ§â„Çè„Å£„Å¶„ÇÇÂêå„Åò„Éî„É≥„Å´È£õ„Å∂Ôºâ
  // ‰æã: { label:"HOTEL", coords:{lat:33.59, lng:130.40} }
  const day2_3LunchCandidates = [
    { label: "ÂÖÉÁ•ñ ÂçöÂ§ö„ÇÅ„Çì„Åü„ÅÑÈáç" },
    { label: "ÂçöÂ§ö„Ç∑„Éº„Éï„Éº„Éâ „ÅÜ„ÅäÁî∞" },
    { label: "È≠ö„ÉàËÇ¥ „ÅÑ„Å®„Åä„Åã„ÅóÔºàÊò•ÂêâÔºâ" },
    { label: "„Å≤„Åó„ÇÄ„ÇâÔºàÊò•ÂêâÔºâ" },
    { label: "Â§ßÂú∞„ÅÆ„ÅÜ„Å©„Çì ÂçöÂ§öÈßÖ„Å°„Åã„Å¶„ÇìÔºàÊúùÊó•„Éì„É´B2Ôºâ" },
  ];
  const airportLunchCandidates = [
    { label: "Á´π‰πÉÂ±ã Á¶èÂ≤°Á©∫Ê∏ØÂ∫ó" },
    { label: "„É©„Éº„É°„É≥ÊªëËµ∞Ë∑ØÔºà„Éï„Éº„Éâ„Éõ„Éº„É´Ôºâ" },
    { label: "Âõ†Âπ°„ÅÜ„Å©„ÇìÔºàÁ¶èÂ≤°Á©∫Ê∏ØÔºâ" },
    { label: "„ÅÜ„Åæ„ÇÑ Á¶èÂ≤°Á©∫Ê∏ØÂ∫ó" },
    { label: "B.B.QuisineÔºàÂõΩÂÜÖÁ∑ö3FÔºâ" },
  ];

  const timeline = [
    {
      day: "Day 1 (9/19 Èáë)",
      events: [
        { time:"12:10", title:"üõ´ ÂêçÂè§Â±ãÁô∫ÔºàÈ£õË°åÊ©üÔºâ", detail:"12:10 ‚Üí 13:35", hideMaps:true },
        { time:"12:15", title:"üõ´ Êù±‰∫¨Áô∫ÔºàÈ£õË°åÊ©üÔºâ",   detail:"12:15 ‚Üí 14:10", hideMaps:true },
        { time:"15:00", title:"üç¥ „ÅäÊòº", detail:"Á©∫Ê∏ØÂÜÖ„ÅÆÂÄôË£úÔºà10‰∫∫‰ª•‰∏äOKÔºâ", candidates:airportLunchCandidates },

        // „Éõ„ÉÜ„É´„ÅØÂ∫ßÊ®ô„ÅßÂõ∫ÂÆöÔºà‚ÄªÂ∫ßÊ®ô„ÅØË™øÊï¥ÂèØÔºö‰∏ã„ÅÆÊï∞ÂÄ§„ÇíÁõ¥„Åô„Å†„ÅëÔºâ
        {
          time:"16:00",
          title:"üè® „ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥",
          detail:"HOTEL Á≤ã - sui - HARUYOSHIÔºàÊóßGrand Base FukuokaÔºâ",
          maps: {
            label: "HOTEL Á≤ã - sui - HARUYOSHI",
            // Google: ÂÖ±ÊúâÁü≠Á∏ÆURL„Åß„ÇÇOKÔºàÁõ¥ÊåáÂÆö„Å™„ÇâÂ∞ÜÊù•Â§âÊõ¥„Å´„ÇÇÂº∑„ÅÑÔºâ
            g: "https://maps.app.goo.gl/SzYhBhZ6TuZbtRbv6",
            // Apple: Â∫ßÊ®ô„ÅßÂõ∫ÂÆö
            coords: { lat: 33.590248, lng: 130.408879 }
          }
        },

        { time:"16:30", title:"üö¥ Ëá™Ëª¢ËªäË¶≥ÂÖâ",
          detail:"Â§ßÊø†ÂÖ¨Âúí / Á¶èÂ≤°ÂüéË∑° / ÂçöÂ§ö„Éù„Éº„Éà„Çø„ÉØ„Éº / Ê´õÁî∞Á•ûÁ§æ / ÊâøÂ§©ÂØ∫ÈÄö„Çä „Å™„Å©",
          candidates:[
            { label:"Â§ßÊø†ÂÖ¨Âúí" },
            { label:"Á¶èÂ≤°ÂüéË∑°ÔºàËàûÈ∂¥ÂÖ¨ÂúíÔºâ" },
            { label:"ÂçöÂ§ö„Éù„Éº„Éà„Çø„ÉØ„Éº" },
            { label:"Ê´õÁî∞Á•ûÁ§æ" },
            { label:"ÊâøÂ§©ÂØ∫ÈÄö„Çä" },
          ]
        },

        { time:"20:30", title:"üç≤ Â§ú„ÅîÈ£Ø",
          detail:"ÂÖÉÁ•ñ „ÇÇ„Å§Èçã Ê•ΩÂ§©Âú∞ Â§©Á•ûÊú¨Â∫óÔºà„Ç¢„ÇØ„É≠„ÇπÁ¶èÂ≤° B2FÔºâ",
          maps:{ label:"ÂÖÉÁ•ñ „ÇÇ„Å§Èçã Ê•ΩÂ§©Âú∞ Â§©Á•ûÊú¨Â∫ó" } // ‚ÜêÂ∫ßÊ®ôÂàÜ„Åã„Çå„Å∞ coords „ÇíÂæå„ÅßËøΩË®ò
        },

        { time:"22:00", title:"üïí Ëá™Áî±ÊôÇÈñì", hideMaps:true },
      ]
    },
    {
      day: "Day 2 (9/20 Âúü)",
      events: [
        { time:"12:00", title:"üç¥ „ÅäÊòºÔºàÂÄôË£úÔºâ", detail:"ÂÄôË£ú„Åã„ÇâÈÅ∏Êäû", candidates:day2_3LunchCandidates },
        { time:"14:00", title:"üéØ „Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£",
          detail:"EXBAR TOKYO plus ÂçöÂ§öÔºà„Ç≠„É£„Éä„É´„Ç∑„ÉÜ„Ç£ÂçöÂ§ö 5FÔºâ",
          maps:{ label:"EXBAR TOKYO plus ÂçöÂ§ö" } },
        { time:"18:00", title:"üç∫ Â§ú„ÅîÈ£Ø",
          detail:"Êµ∑ÈÆÆÂ±ÖÈÖíÂ±ã „Åæ„ÇãÂÆ∂ Ë•ø‰∏≠Ê¥≤",
          maps:{ label:"Êµ∑ÈÆÆÂ±ÖÈÖíÂ±ã „Åæ„ÇãÂÆ∂ Ë•ø‰∏≠Ê¥≤" } },
        { time:"20:00", title:"üç∏ 2‰ª∂ÁõÆÔºàÊú™ÂÆöÔºâ", hideMaps:true },
        { time:"22:00", title:"üïí Ëá™Áî±ÊôÇÈñì", hideMaps:true },
      ]
    },
    {
      day: "Day 3 (9/21 Êó•)",
      events: [
        { time:"12:00", title:"üç¥ „ÅäÊòºÔºàÂÄôË£úÔºâ", detail:"ÂÄôË£ú„Åã„ÇâÈÅ∏Êäû", candidates:day2_3LunchCandidates },
        { time:"13:00", title:"üõçÔ∏è Á©∫Ê∏Ø„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞Ôºà„ÅäÂúüÁî£Ôºâ",
          candidates:[
            { label:"ANA FESTAÔºàÂõΩÂÜÖÁ∑öÔºâ" },
            { label:"ÂçöÂ§öÈäòÂìÅËîµ" },
            { label:"„Åù„Çâ„ÇÇ„Éº„ÇãÂïÜÂ∫ó" },
            { label:"Á¶èÂ§™ÈÉéÔºàÊòéÂ§™Â≠êÔºâ" },
            { label:"Êù±Èõ≤Â†ÇÔºà„Å´„Çè„Åã„Åõ„Çì„Å∫„ÅÑÔºâ" },
          ]
        },
        { time:"14:15", title:"üõ¨ Êù±‰∫¨ÁµÑ Â∏∞„ÇäÔºàÈ£õË°åÊ©üÔºâ", detail:"14:15 ‚Üí 16:05", hideMaps:true },
        { time:"14:50", title:"üõ¨ ÂêçÂè§Â±ãÁµÑ Â∏∞„ÇäÔºàÈ£õË°åÊ©üÔºâ", detail:"14:50 ‚Üí 16:40", hideMaps:true },
      ]
    }
  ];

  /* ---- UI ---- */
  const Pill = ({children,onClick})=>(
    <button onClick={onClick} className="inline-block px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm">{children}</button>
  );

  function EventRow({ time, title, detail, maps, mapsQ, hideMaps, candidates }) {
    return (
      <div className="grid items-center mb-8" style={{ gridTemplateColumns:`${TIME_COL}px ${RAIL_COL}px 1fr`, columnGap:`${GRID_GAP}px` }}>
        <div className="text-right font-bold text-gray-800 tabular-nums">{time}</div>
        <div className="relative flex items-center justify-center">
          <div className="w-[12px] h-[12px] bg-blue-600 rounded-full"></div>
        </div>
        <div className="bg-white rounded-2xl shadow p-4">
          <div className="font-semibold text-gray-900 text-lg">{title}</div>
          {detail && <div className="text-sm text-gray-600 mt-1">{detail}</div>}
          {!hideMaps && (maps || mapsQ) && (
            <div className="mt-3">
              <Pill onClick={()=>openMapDialog(maps || mapsQ)}>Âú∞Âõ≥„ÇíÈñã„Åè</Pill>
            </div>
          )}
          {candidates && (
            <div className="mt-3">
              <div className="text-xs text-gray-500 mb-2">ÂÄôË£úÔºà„Çø„ÉÉ„Éó„Åß„Éû„ÉÉ„Éó„ÇíÈÅ∏ÊäûÔºâ</div>
              <div className="flex flex-wrap gap-2">
                {candidates.map((s,i)=>(
                  <Pill key={i} onClick={()=>openMapDialog(s)}>{s.label || s.name || s}</Pill>
                ))}
              </div>
            </div>
          )}
        </div>
      </div>
    );
  }

  function DaySection({ day, events }) {
    return (
      <div className="mb-12">
        <h2 className="text-xl font-semibold mb-6 border-b pb-2">{day}</h2>
        <div className="relative">
          <div className="absolute bg-gray-300" style={{ left:`${RAIL_LEFT_PX}px`, top:10, bottom:10, width:2, borderRadius:9999 }}></div>
          <div>{events.map((ev,i)=>(<EventRow key={i} {...ev} />))}</div>
        </div>
      </div>
    );
  }

  function App(){
    useEffect(()=>{ if("serviceWorker" in navigator){ navigator.serviceWorker.register("/sw.js").catch(()=>{});} },[]);
    return (
      <div className="p-6 md:p-8 w-full min-h-screen flex flex-col items-center" style={{ paddingTop:'calc(env(safe-area-inset-top, 0px) + 16px)' }}>
        <h1 className="text-3xl font-bold tracking-wide mt-2">Á¶èÂ≤°ÊóÖË°å</h1>
        <p className="text-sm text-gray-600 mb-6">ÊúüÈñìÔºö2025.09.19 - 2025.09.21</p>
        <div className="w-full max-w-4xl">{timeline.map((d,idx)=>(<DaySection key={idx} {...d} />))}</div>
        <footer className="mt-2 text-xs text-gray-500 text-center pb-10">üìå iPhone„Åß„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†ÔºöSafari„ÅßÈñã„Åè ‚Üí ÂÖ±ÊúâÔºà‚ñ°„Å´‚ÜëÔºâ‚Üí <b>„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†</b></footer>
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
