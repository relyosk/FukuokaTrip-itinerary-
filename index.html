<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ç¦å²¡æ—…è¡Œ</title>

  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" href="/icons/icon-180.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="ç¦å²¡æ—…è¡Œ" />
  <meta name="theme-color" content="#b91c1c" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* 3æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚° */
    #mapDialog{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:1000}
    #mapDialog .panel{width:92%;max-width:360px;background:#fff;border-radius:16px;padding:16px 16px 12px;box-shadow:0 10px 25px rgba(0,0,0,.18)}
    #mapDialog h3{font-size:16px;font-weight:600;margin:4px 0 10px;word-break:keep-all}
    #mapDialog .btn{width:100%;border:none;border-radius:10px;padding:12px 14px;font-size:15px;margin-top:8px}
    #mapDialog .google{background:#4285F4;color:#fff}
    #mapDialog .apple{background:#111;color:#fff}
    #mapDialog .cancel{background:#e5e7eb;color:#111}
  </style>
</head>
<body class="bg-gray-100 text-gray-900">
  <!-- 3æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
  <div id="mapDialog" onclick="closeDialog()">
    <div class="panel" onclick="event.stopPropagation()">
      <div class="text-xs text-gray-500">åœ°å›³ã‚’é–‹ã</div>
      <h3 id="mapPlace">å ´æ‰€å</h3>
      <button class="btn google" onclick="goGoogle()">Google Map</button>
      <button class="btn apple"  onclick="goApple()">Apple Map</button>
      <button class="btn cancel" onclick="closeDialog()">æˆ»ã‚‹</button>
    </div>
  </div>

  <div id="root"></div>

  <script type="text/babel">
  const { useEffect } = React;

  /* ---- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®šæ•°ï¼ˆæ™‚é–“åˆ—/ãƒ¬ãƒ¼ãƒ«åˆ—ã®å¹…ï¼‰ ---- */
  const TIME_COL = 72;   // px
  const RAIL_COL = 20;   // pxï¼ˆä¸­å¤®ã«ãƒ¬ãƒ¼ãƒ«ã€ä¸¸ã®ç›´å¾„12pxï¼‰
  const GRID_GAP = 16;   // åˆ—é–“ã®éš™é–“
  const RAIL_OFFSET = -1; // æ°´å¹³æ–¹å‘ã®å¾®èª¿æ•´ï¼ˆ-2ã€œ+2ï¼‰
  const RAIL_LEFT_PX = TIME_COL + GRID_GAP + (RAIL_COL / 2) + RAIL_OFFSET;

  /* ---- ãƒãƒƒãƒ—URLãƒ“ãƒ«ãƒ€ãƒ¼ï¼ˆå®‰å®šå„ªå…ˆï¼‰ ---- */
  // å—ã‘å–ã‚Šå½¢å¼:
  //  æ–‡å­—åˆ—: "åº—å"ï¼ˆæ¤œç´¢ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
  //  ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ:
  //   { label, coords:{lat,lng}, placeId, g, a }
  //   - g/a ã¯å®Œå…¨URLã‚’ç›´æŒ‡å®šï¼ˆæœ€å„ªå…ˆï¼‰
  //   - placeId ãŒã‚ã‚Œã° Google ã¯ place_id ã‚’å„ªå…ˆ
  //   - coords ãŒã‚ã‚Œã° ä¸¡è€…ã¨ã‚‚åº§æ¨™ã§å›ºå®šï¼ˆAppleã¯ ?ll=lat,lng&q=labelï¼‰
  const gSearch = (q) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`;
  const aSearch = (q) => `https://maps.apple.com/?q=${encodeURIComponent(q)}`;
  const isUrl = (v) => typeof v === "string" && /^https?:\/\//i.test(v);

  function toResolvedTarget(input) {
    if (typeof input === "string") {
      return {
        label: input,
        g: gSearch(input),
        a: aSearch(input),
      };
    }
    const { label = "å ´æ‰€", g, a, placeId, coords, q } = (input || {});
    // å®Œå…¨URLãŒã‚ã‚Œã°æœ€å„ªå…ˆã§é€šã™
    if (g || a) {
      return {
        label,
        g: g || (q ? gSearch(q) : gSearch(label)),
        a: a || (q ? aSearch(q) : aSearch(label)),
      };
    }
    // placeId å„ªå…ˆï¼ˆGoogleï¼‰
    if (placeId) {
      const gUrl =
        `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(label)}&query_place_id=${encodeURIComponent(placeId)}`;
      return {
        label,
        g: gUrl,
        a: coords ? `https://maps.apple.com/?ll=${coords.lat},${coords.lng}&q=${encodeURIComponent(label)}`
                  : aSearch(label),
      };
    }
    // åº§æ¨™ãŒã‚ã‚Œã°åº§æ¨™å›ºå®š
    if (coords && typeof coords.lat === "number" && typeof coords.lng === "number") {
      return {
        label,
        g: `https://www.google.com/maps/search/?api=1&query=${coords.lat},${coords.lng}`,
        a: `https://maps.apple.com/?ll=${coords.lat},${coords.lng}&q=${encodeURIComponent(label)}`
      };
    }
    // ãã‚Œã‚‚ç„¡ã‘ã‚Œã°åç§°æ¤œç´¢
    return { label, g: gSearch(q || label), a: aSearch(q || label) };
  }

  // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°åˆ¶å¾¡
  let currentTarget = { label:"", g:"", a:"" };
  window.openMapDialog = (placeOrObj) => {
    currentTarget = toResolvedTarget(placeOrObj);
    document.getElementById("mapPlace").innerText = currentTarget.label || "å ´æ‰€";
    document.getElementById("mapDialog").style.display = "flex";
  };
  window.closeDialog = () => {
    document.getElementById("mapDialog").style.display = "none";
    currentTarget = { label:"", g:"", a:"" };
  };
  window.goGoogle = () => { window.open(currentTarget.g, "_blank"); closeDialog(); };
  window.goApple  = () => { window.open(currentTarget.a, "_blank"); closeDialog(); };

  /* ---- ãƒ‡ãƒ¼ã‚¿ ---- */
  // â€» åº§æ¨™ãŒåˆ¤æ˜ã—ã¦ã„ã‚‹ã‚‚ã®ã¯ coords ã‚’è¨­å®šï¼ˆåç§°ãŒå¤‰ã‚ã£ã¦ã‚‚åŒã˜ãƒ”ãƒ³ã«é£›ã¶ï¼‰
  // ä¾‹: { label:"HOTEL", coords:{lat:33.59, lng:130.40} }
  const day2_3LunchCandidates = [
    { label: "å…ƒç¥– åšå¤šã‚ã‚“ãŸã„é‡" },
    { label: "åšå¤šã‚·ãƒ¼ãƒ•ãƒ¼ãƒ‰ ã†ãŠç”°" },
    { label: "é­šãƒˆè‚´ ã„ã¨ãŠã‹ã—ï¼ˆæ˜¥å‰ï¼‰" },
    { label: "ã²ã—ã‚€ã‚‰ï¼ˆæ˜¥å‰ï¼‰" },
    { label: "å¤§åœ°ã®ã†ã©ã‚“ åšå¤šé§…ã¡ã‹ã¦ã‚“ï¼ˆæœæ—¥ãƒ“ãƒ«B2ï¼‰" },
  ];
  const airportLunchCandidates = [
    { label: "ç«¹ä¹ƒå±‹ ç¦å²¡ç©ºæ¸¯åº—" },
    { label: "ãƒ©ãƒ¼ãƒ¡ãƒ³æ»‘èµ°è·¯ï¼ˆãƒ•ãƒ¼ãƒ‰ãƒ›ãƒ¼ãƒ«ï¼‰" },
    { label: "å› å¹¡ã†ã©ã‚“ï¼ˆç¦å²¡ç©ºæ¸¯ï¼‰" },
    { label: "ã†ã¾ã‚„ ç¦å²¡ç©ºæ¸¯åº—" },
    { label: "B.B.Quisineï¼ˆå›½å†…ç·š3Fï¼‰" },
  ];

  const timeline = [
    {
      day: "Day 1 (9/19 é‡‘)",
      events: [
        { time:"12:10", title:"ğŸ›« åå¤å±‹ç™ºï¼ˆé£›è¡Œæ©Ÿï¼‰", detail:"12:10 â†’ 13:35", hideMaps:true },
        { time:"12:15", title:"ğŸ›« æ±äº¬ç™ºï¼ˆé£›è¡Œæ©Ÿï¼‰",   detail:"12:15 â†’ 14:10", hideMaps:true },
        { time:"15:00", title:"ğŸ´ ãŠæ˜¼", detail:"ç©ºæ¸¯å†…ã®å€™è£œï¼ˆ10äººä»¥ä¸ŠOKï¼‰", candidates:airportLunchCandidates },

        // ãƒ›ãƒ†ãƒ«ã¯åº§æ¨™ã§å›ºå®šï¼ˆâ€»åº§æ¨™ã¯èª¿æ•´å¯ï¼šä¸‹ã®æ•°å€¤ã‚’ç›´ã™ã ã‘ï¼‰
        {
          time:"16:00",
          title:"ğŸ¨ ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³",
          detail:"HOTEL ç²‹ - sui - HARUYOSHIï¼ˆæ—§Grand Base Fukuokaï¼‰",
          maps: {
            label: "HOTEL ç²‹ - sui - HARUYOSHI",
            // Google: å…±æœ‰çŸ­ç¸®URLã§ã‚‚OKï¼ˆç›´æŒ‡å®šãªã‚‰å°†æ¥å¤‰æ›´ã«ã‚‚å¼·ã„ï¼‰
            g: "https://maps.app.goo.gl/SzYhBhZ6TuZbtRbv6",
            // Apple: åº§æ¨™ã§å›ºå®š
            coords: { lat: 33.590248, lng: 130.408879 }
          }
        },

        { time:"16:30", title:"ğŸš´ è‡ªè»¢è»Šè¦³å…‰",
          detail:"å¤§æ¿ å…¬åœ’ / ç¦å²¡åŸè·¡ / åšå¤šãƒãƒ¼ãƒˆã‚¿ãƒ¯ãƒ¼ / æ«›ç”°ç¥ç¤¾ / æ‰¿å¤©å¯ºé€šã‚Š ãªã©",
          candidates:[
            { label:"å¤§æ¿ å…¬åœ’" },
            { label:"ç¦å²¡åŸè·¡ï¼ˆèˆé¶´å…¬åœ’ï¼‰" },
            { label:"åšå¤šãƒãƒ¼ãƒˆã‚¿ãƒ¯ãƒ¼" },
            { label:"æ«›ç”°ç¥ç¤¾" },
            { label:"æ‰¿å¤©å¯ºé€šã‚Š" },
          ]
        },

        { time:"20:30", title:"ğŸ² å¤œã”é£¯",
          detail:"å…ƒç¥– ã‚‚ã¤é‹ æ¥½å¤©åœ° å¤©ç¥æœ¬åº—ï¼ˆã‚¢ã‚¯ãƒ­ã‚¹ç¦å²¡ B2Fï¼‰",
          maps:{ label:"å…ƒç¥– ã‚‚ã¤é‹ æ¥½å¤©åœ° å¤©ç¥æœ¬åº—" } // â†åº§æ¨™åˆ†ã‹ã‚Œã° coords ã‚’å¾Œã§è¿½è¨˜
        },

        { time:"22:00", title:"ğŸ•’ è‡ªç”±æ™‚é–“", hideMaps:true },
      ]
    },
    {
      day: "Day 2 (9/20 åœŸ)",
      events: [
        { time:"12:00", title:"ğŸ´ ãŠæ˜¼ï¼ˆå€™è£œï¼‰", detail:"å€™è£œã‹ã‚‰é¸æŠ", candidates:day2_3LunchCandidates },
        { time:"14:00", title:"ğŸ¯ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£",
          detail:"EXBAR TOKYO plus åšå¤šï¼ˆã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£åšå¤š 5Fï¼‰",
          maps:{ label:"EXBAR TOKYO plus åšå¤š" } },
        { time:"18:00", title:"ğŸº å¤œã”é£¯",
          detail:"æµ·é®®å±…é…’å±‹ ã¾ã‚‹å®¶ è¥¿ä¸­æ´²",
          maps:{ label:"æµ·é®®å±…é…’å±‹ ã¾ã‚‹å®¶ è¥¿ä¸­æ´²" } },
        { time:"20:00", title:"ğŸ¸ 2ä»¶ç›®ï¼ˆæœªå®šï¼‰", hideMaps:true },
        { time:"22:00", title:"ğŸ•’ è‡ªç”±æ™‚é–“", hideMaps:true },
      ]
    },
    {
      day: "Day 3 (9/21 æ—¥)",
      events: [
        { time:"12:00", title:"ğŸ´ ãŠæ˜¼ï¼ˆå€™è£œï¼‰", detail:"å€™è£œã‹ã‚‰é¸æŠ", candidates:day2_3LunchCandidates },
        { time:"13:00", title:"ğŸ›ï¸ ç©ºæ¸¯ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ï¼ˆãŠåœŸç”£ï¼‰",
          candidates:[
            { label:"ANA FESTAï¼ˆå›½å†…ç·šï¼‰" },
            { label:"åšå¤šéŠ˜å“è”µ" },
            { label:"ãã‚‰ã‚‚ãƒ¼ã‚‹å•†åº—" },
            { label:"ç¦å¤ªéƒï¼ˆæ˜å¤ªå­ï¼‰" },
            { label:"æ±é›²å ‚ï¼ˆã«ã‚ã‹ã›ã‚“ãºã„ï¼‰" },
          ]
        },
        { time:"14:15", title:"ğŸ›¬ æ±äº¬çµ„ å¸°ã‚Šï¼ˆé£›è¡Œæ©Ÿï¼‰", detail:"14:15 â†’ 16:05", hideMaps:true },
        { time:"14:50", title:"ğŸ›¬ åå¤å±‹çµ„ å¸°ã‚Šï¼ˆé£›è¡Œæ©Ÿï¼‰", detail:"14:50 â†’ 16:40", hideMaps:true },
      ]
    }
  ];

  /* ---- UI ---- */
  const Pill = ({children,onClick})=>(
    <button onClick={onClick} className="inline-block px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm">{children}</button>
  );

  function EventRow({ time, title, detail, maps, mapsQ, hideMaps, candidates }) {
    return (
      <div className="grid items-center mb-8" style={{ gridTemplateColumns:`${TIME_COL}px ${RAIL_COL}px 1fr`, columnGap:`${GRID_GAP}px` }}>
        <div className="text-right font-bold text-gray-800 tabular-nums">{time}</div>
        <div className="relative flex items-center justify-center">
          <div className="w-[12px] h-[12px] bg-blue-600 rounded-full"></div>
        </div>
        <div className="bg-white rounded-2xl shadow p-4">
          <div className="font-semibold text-gray-900 text-lg">{title}</div>
          {detail && <div className="text-sm text-gray-600 mt-1">{detail}</div>}
          {!hideMaps && (maps || mapsQ) && (
            <div className="mt-3">
              <Pill onClick={()=>openMapDialog(maps || mapsQ)}>åœ°å›³ã‚’é–‹ã</Pill>
            </div>
          )}
          {candidates && (
            <div className="mt-3">
              <div className="text-xs text-gray-500 mb-2">å€™è£œï¼ˆã‚¿ãƒƒãƒ—ã§ãƒãƒƒãƒ—ã‚’é¸æŠï¼‰</div>
              <div className="flex flex-wrap gap-2">
                {candidates.map((s,i)=>(
                  <Pill key={i} onClick={()=>openMapDialog(s)}>{s.label || s.name || s}</Pill>
                ))}
              </div>
            </div>
          )}
        </div>
      </div>
    );
  }

  function DaySection({ day, events }) {
    return (
      <div className="mb-12">
        <h2 className="text-xl font-semibold mb-6 border-b pb-2">{day}</h2>
        <div className="relative">
          <div className="absolute bg-gray-300" style={{ left:`${RAIL_LEFT_PX}px`, top:10, bottom:10, width:2, borderRadius:9999 }}></div>
          <div>{events.map((ev,i)=>(<EventRow key={i} {...ev} />))}</div>
        </div>
      </div>
    );
  }

  function App(){
    useEffect(()=>{ if("serviceWorker" in navigator){ navigator.serviceWorker.register("/sw.js").catch(()=>{});} },[]);
    return (
      <div className="p-6 md:p-8 w-full min-h-screen flex flex-col items-center" style={{ paddingTop:'calc(env(safe-area-inset-top, 0px) + 16px)' }}>
        <h1 className="text-3xl font-bold tracking-wide mt-2">ç¦å²¡æ—…è¡Œ</h1>
        <p className="text-sm text-gray-600 mb-6">æœŸé–“ï¼š2025.09.19 - 2025.09.21</p>
        <div className="w-full max-w-4xl">{timeline.map((d,idx)=>(<DaySection key={idx} {...d} />))}</div>
        <footer className="mt-2 text-xs text-gray-500 text-center pb-10">ğŸ“Œ iPhoneã§ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ï¼šSafariã§é–‹ã â†’ å…±æœ‰ï¼ˆâ–¡ã«â†‘ï¼‰â†’ <b>ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ </b></footer>
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
