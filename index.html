import React, { useEffect, useRef, useState } from "react";

/**
 * Fukuoka Trip ‚Äì Pro UI (React Preview)
 * - Tailwind only, no external libs
 * - Timeline with fixed rail, aligned time + dot
 * - Map chooser dialog (Google / Apple)
 * - Flight detail drawer (swipe-down-to-close) with stricter threshold (~4cm ‚âí 150px)
 * - Scroll lock while dialogs are open
 */

/* ===== Helpers: map links ===== */
const gSearchByName = (name) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(name)}`;
const aSearchByName = (name) => `https://maps.apple.com/?q=${encodeURIComponent(name)}`;
const gByLatLng = (lat, lng, label) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(label)}&query_place_id=&center=${lat},${lng}`;
const aByLatLng = (lat, lng, label) => `https://maps.apple.com/?ll=${lat},${lng}&q=${encodeURIComponent(label)}`;

const mapLink = (target, place) => {
  if (place.lat && place.lng) {
    return target === "google" ? gByLatLng(place.lat, place.lng, place.label ?? place.name) : aByLatLng(place.lat, place.lng, place.label ?? place.name);
  }
  return target === "google" ? gSearchByName(place.name) : aSearchByName(place.name);
};

/* ===== Data ===== */
const day2_3LunchCandidates = [
  { name: "ÂÖÉÁ•ñ ÂçöÂ§ö„ÇÅ„Çì„Åü„ÅÑÈáç" },
  { name: "ÂçöÂ§ö„Ç∑„Éº„Éï„Éº„Éâ „ÅÜ„ÅäÁî∞" },
  { name: "È≠ö„ÉàËÇ¥ „ÅÑ„Å®„Åä„Åã„ÅóÔºàÊò•ÂêâÔºâ" },
  { name: "„Å≤„Åó„ÇÄ„ÇâÔºàÊò•ÂêâÔºâ" },
  { name: "Â§ßÂú∞„ÅÆ„ÅÜ„Å©„Çì ÂçöÂ§öÈßÖ„Å°„Åã„Å¶„ÇìÔºàÊúùÊó•„Éì„É´B2Ôºâ" },
];
const airportLunchCandidates = [
  { name: "Á´π‰πÉÂ±ã Á¶èÂ≤°Á©∫Ê∏ØÂ∫ó" },
  { name: "„É©„Éº„É°„É≥ÊªëËµ∞Ë∑ØÔºà„Éï„Éº„Éâ„Éõ„Éº„É´Ôºâ" },
  { name: "Âõ†Âπ°„ÅÜ„Å©„ÇìÔºàÁ¶èÂ≤°Á©∫Ê∏ØÔºâ" },
  { name: "„ÅÜ„Åæ„ÇÑ Á¶èÂ≤°Á©∫Ê∏ØÂ∫ó" },
  { name: "B.B.QuisineÔºàÂõΩÂÜÖÁ∑ö3FÔºâ" },
];

// Hotel ‚Äì lock to coordinates from user's link for stability
const HOTEL_PLACE = { name: "HOTEL Á≤ã - sui - HARUYOSHI", lat: 33.58752, lng: 130.40260, label: "HOTEL Á≤ã - sui - HARUYOSHI" };

const timeline = [
  {
    day: "Day 1 (9/19 Èáë)",
    events: [
      { time: "12:10", title: "üõ´ ÂêçÂè§Â±ãÁô∫ÔºàÈ£õË°åÊ©üÔºâ", detail: "12:10 ‚Üí 13:35", kind: "flight-out" },
      { time: "12:15", title: "üõ´ Êù±‰∫¨Áô∫ÔºàÈ£õË°åÊ©üÔºâ", detail: "12:15 ‚Üí 14:10", kind: "flight-out" },
      { time: "15:00", title: "üç¥ „ÅäÊòº", detail: "Á©∫Ê∏ØÂÜÖ„ÅÆÂÄôË£úÔºà10‰∫∫‰ª•‰∏äOKÔºâ", candidates: airportLunchCandidates },
      { time: "16:00", title: "üè® „ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥", detail: "HOTEL Á≤ã - sui - HARUYOSHIÔºàÊóßGrand Base FukuokaÔºâ", place: HOTEL_PLACE },
      { time: "16:30", title: "üö¥ Ëá™Ëª¢ËªäË¶≥ÂÖâ", detail: "Â§ßÊø†ÂÖ¨Âúí / Á¶èÂ≤°ÂüéË∑° / ÂçöÂ§ö„Éù„Éº„Éà„Çø„ÉØ„Éº / Ê´õÁî∞Á•ûÁ§æ / ÊâøÂ§©ÂØ∫ÈÄö„Çä „Å™„Å©",
        candidates: [
          { name: "Â§ßÊø†ÂÖ¨Âúí" },
          { name: "Á¶èÂ≤°ÂüéË∑°ÔºàËàûÈ∂¥ÂÖ¨ÂúíÔºâ" },
          { name: "ÂçöÂ§ö„Éù„Éº„Éà„Çø„ÉØ„Éº" },
          { name: "Ê´õÁî∞Á•ûÁ§æ" },
          { name: "ÊâøÂ§©ÂØ∫ÈÄö„Çä" },
        ] },
      { time: "20:30", title: "üç≤ Â§ú„ÅîÈ£Ø", detail: "ÂÖÉÁ•ñ „ÇÇ„Å§Èçã Ê•ΩÂ§©Âú∞ Â§©Á•ûÊú¨Â∫óÔºà„Ç¢„ÇØ„É≠„ÇπÁ¶èÂ≤° B2FÔºâ", place: { name: "ÂÖÉÁ•ñ „ÇÇ„Å§Èçã Ê•ΩÂ§©Âú∞ Â§©Á•ûÊú¨Â∫ó" } },
      { time: "22:00", title: "üïí Ëá™Áî±ÊôÇÈñì" },
    ],
  },
  {
    day: "Day 2 (9/20 Âúü)",
    events: [
      { time: "12:00", title: "üç¥ „ÅäÊòºÔºàÂÄôË£úÔºâ", detail: "ÂÄôË£ú„Åã„ÇâÈÅ∏Êäû", candidates: day2_3LunchCandidates },
      { time: "14:00", title: "üéØ „Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£", detail: "EXBAR TOKYO plus ÂçöÂ§öÔºà„Ç≠„É£„Éä„É´„Ç∑„ÉÜ„Ç£ÂçöÂ§ö 5FÔºâ", place: { name: "EXBAR TOKYO plus ÂçöÂ§ö" } },
      { time: "18:00", title: "üç∫ Â§ú„ÅîÈ£Ø", detail: "Êµ∑ÈÆÆÂ±ÖÈÖíÂ±ã „Åæ„ÇãÂÆ∂ Ë•ø‰∏≠Ê¥≤", place: { name: "Êµ∑ÈÆÆÂ±ÖÈÖíÂ±ã „Åæ„ÇãÂÆ∂ Ë•ø‰∏≠Ê¥≤" } },
      { time: "20:00", title: "üç∏ 2‰ª∂ÁõÆÔºàÊú™ÂÆöÔºâ" },
      { time: "22:00", title: "üïí Ëá™Áî±ÊôÇÈñì" },
    ],
  },
  {
    day: "Day 3 (9/21 Êó•)",
    events: [
      { time: "12:00", title: "üç¥ „ÅäÊòºÔºàÂÄôË£úÔºâ", detail: "ÂÄôË£ú„Åã„ÇâÈÅ∏Êäû", candidates: day2_3LunchCandidates },
      { time: "13:00", title: "üõçÔ∏è Á©∫Ê∏Ø„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞Ôºà„ÅäÂúüÁî£Ôºâ",
        candidates: [
          { name: "ANA FESTAÔºàÂõΩÂÜÖÁ∑öÔºâ" },
          { name: "ÂçöÂ§öÈäòÂìÅËîµ" },
          { name: "„Åù„Çâ„ÇÇ„Éº„ÇãÂïÜÂ∫ó" },
          { name: "Á¶èÂ§™ÈÉéÔºàÊòéÂ§™Â≠êÔºâ" },
          { name: "Êù±Èõ≤Â†ÇÔºà„Å´„Çè„Åã„Åõ„Çì„Å∫„ÅÑÔºâ" },
        ] },
      { time: "14:15", title: "üõ¨ Êù±‰∫¨ÁµÑ Â∏∞„ÇäÔºàÈ£õË°åÊ©üÔºâ", detail: "14:15 ‚Üí 16:05", kind: "flight-in" },
      { time: "14:50", title: "üõ¨ ÂêçÂè§Â±ãÁµÑ Â∏∞„ÇäÔºàÈ£õË°åÊ©üÔºâ", detail: "14:50 ‚Üí 16:40", kind: "flight-in" },
    ],
  },
];

/* ===== Flight details (compact) ===== */
const FLOOR_HND = "https://tokyo-haneda.com/floor/index.html";
const FLOOR_CENTRAIR = "https://www.centrair.jp/map/index.html";
const CHECKIN_GUIDE = "https://www.starflyer.jp/checkin/boarding/vender.html";

const FL_OUT = {
  title: "Ë°å„ÅçÔºàOUTBOUNDÔºâ",
  groups: [
    { label: "Êù±‰∫¨ÁµÑÔºà‰æøÂêçÔºöSFJ047Ôºâ", code: "SFJ047", book: "3101", conf: "482-743-569", pax: "Áî∞‰∏≠„ÄÅÊñ∞‰∫ï", counter: "Á¨¨1„Çø„Éº„Éü„Éä„É´2ÈöéSFJ„Ç´„Ç¶„É≥„Çø„Éº" },
    { label: "ÂêçÂè§Â±ãÁµÑ1Ôºà‰æøÂêçÔºöSFJ063Ôºâ", code: "SFJ063", book: "3101", conf: "607-330-326", pax: "ÊµÖÈáé„ÄÅÂÆÆËÖ∞„ÄÅ‰∏äÂ†Ä", counter: "ÊóÖÂÆ¢„Çø„Éº„Éü„Éä„É´3FÂõΩÂÜÖÁ∑öANA„Ç´„Ç¶„É≥„Çø„Éº" },
    { label: "ÂêçÂè§Â±ãÁµÑ2Ôºà‰æøÂêçÔºöSFJ063Ôºâ", code: "SFJ063", book: "3104", conf: "197-714-403", pax: "ÈΩäËó§„ÄÅÊ£Æ„ÄÅÈï∑Ê≤º„ÄÅÈáçÁî∞„ÄÅÂâçÁî∞", counter: "ÊóÖÂÆ¢„Çø„Éº„Éü„Éä„É´3FÂõΩÂÜÖÁ∑öANA„Ç´„Ç¶„É≥„Çø„Éº" },
  ],
};

const FL_IN = {
  title: "Â∏∞„ÇäÔºàINBOUNDÔºâ",
  groups: [
    { label: "Êù±‰∫¨ÁµÑÔºà‰æøÂêçÔºöSFJ048Ôºâ", code: "SFJ048", book: "3109", conf: "763-117-264", pax: "Êñ∞‰∫ï„ÄÅÁî∞‰∏≠", counter: "Á¨¨1„Çø„Éº„Éü„Éä„É´2ÈöéSFJ„Ç´„Ç¶„É≥„Çø„Éº" },
    { label: "ÂêçÂè§Â±ãÁµÑ1Ôºà‰æøÂêçÔºöSFJ062Ôºâ", code: "SFJ062", book: "3102", conf: "482-743-329", pax: "ÊµÖÈáé„ÄÅÂÆÆËÖ∞„ÄÅ‰∏äÂ†Ä", counter: "ÊóÖÂÆ¢„Çø„Éº„Éü„Éä„É´3FÂõΩÂÜÖÁ∑öANA„Ç´„Ç¶„É≥„Çø„Éº" },
    { label: "ÂêçÂè§Â±ãÁµÑ2Ôºà‰æøÂêçÔºöSFJ062Ôºâ", code: "SFJ062", book: "3105", conf: "825-237-635", pax: "ÈΩäËó§„ÄÅÊ£Æ„ÄÅÈï∑Ê≤º„ÄÅÈáçÁî∞„ÄÅÂâçÁî∞", counter: "ÊóÖÂÆ¢„Çø„Éº„Éü„Éä„É´3FÂõΩÂÜÖÁ∑öANA„Ç´„Ç¶„É≥„Çø„Éº" },
  ],
};

/* ===== UI bits ===== */
const Pill = ({ children, onClick, variant = "light" }) => (
  <button
    onClick={onClick}
    className={
      variant === "solid"
        ? "inline-flex items-center gap-1 px-4 py-2 rounded-full bg-gray-900 text-white text-sm"
        : "inline-flex items-center gap-1 px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm"
    }
  >
    {children}
  </button>
);

/* ===== Map Dialog ===== */
function MapDialog({ open, place, onClose }) {
  useEffect(() => { document.body.style.overflow = open ? "hidden" : ""; }, [open]);
  if (!open || !place) return null;
  return (
    <div className="fixed inset-0 z-[1000]" onClick={onClose}>
      <div className="absolute inset-0 bg-black/50"></div>
      <div className="absolute inset-x-4 sm:left-1/2 sm:-translate-x-1/2 top-[15%] max-w-md rounded-2xl bg-white shadow-xl p-5" onClick={(e)=>e.stopPropagation()}>
        <div className="text-xs text-gray-500">Âú∞Âõ≥„ÇíÈñã„Åè</div>
        <h3 className="text-lg font-semibold mt-1 break-words">{place.name ?? place.label}</h3>
        <div className="mt-3 grid grid-cols-2 gap-2">
          <Pill variant="solid" onClick={() => { window.open(mapLink("google", place), "_blank"); onClose(); }}>Google Maps</Pill>
          <Pill variant="solid" onClick={() => { window.open(mapLink("apple", place), "_blank"); onClose(); }}>Apple Maps</Pill>
        </div>
        <div className="mt-4 flex justify-end">
          <Pill onClick={onClose}>Èñâ„Åò„Çã</Pill>
        </div>
      </div>
    </div>
  );
}

/* ===== Flight Drawer (swipe to close ~4cm) ===== */
const SWIPE_CLOSE_PX = 150; // Á¥Ñ4cmÁõ∏ÂΩì

function FlightDrawer({ open, mode, onClose }) {
  const data = mode === "out" ? FL_OUT : FL_IN;
  const [expanded, setExpanded] = useState({});
  const startY = useRef(0);
  const travel = useRef(0);
  const panelRef = useRef(null);
  const dragging = useRef(false);

  useEffect(() => { document.body.style.overflow = open ? "hidden" : ""; }, [open]);
  useEffect(() => { if (open) setExpanded({}); }, [open, mode]);

  if (!open) return null;

  const begin = (y) => {
    dragging.current = true;
    startY.current = y;
    travel.current = 0;
    if (panelRef.current) panelRef.current.style.transition = "none";
  };
  const move = (y) => {
    if (!dragging.current) return;
    travel.current = Math.max(0, y - startY.current);
    if (panelRef.current) panelRef.current.style.transform = `translateY(${travel.current}px)`;
  };
  const end = () => {
    if (!dragging.current) return;
    dragging.current = false;
    const d = travel.current;
    if (panelRef.current) panelRef.current.style.transition = "transform 220ms ease";
    if (d > SWIPE_CLOSE_PX) {
      if (typeof onClose === 'function') onClose();
    } else {
      if (panelRef.current) panelRef.current.style.transform = "translateY(0)";
      setTimeout(() => { if (panelRef.current) panelRef.current.style.transition = ""; }, 240);
    }
    travel.current = 0;
  };

  useEffect(() => {
    const p = panelRef.current;
    if (!p) return;
    const onMS = (e) => begin(e.clientY);
    const onMM = (e) => move(e.clientY);
    const onMU = () => end();

    const onTS = (e) => begin(e.touches[0].clientY);
    const onTM = (e) => move(e.touches[0].clientY);
    const onTE = () => end();

    p.addEventListener("mousedown", onMS);
    window.addEventListener("mousemove", onMM);
    window.addEventListener("mouseup", onMU);
    p.addEventListener("touchstart", onTS, { passive: true });
    p.addEventListener("touchmove", onTM, { passive: true });
    p.addEventListener("touchend", onTE);

    return () => {
      p.removeEventListener("mousedown", onMS);
      window.removeEventListener("mousemove", onMM);
      window.removeEventListener("mouseup", onMU);
      p.removeEventListener("touchstart", onTS);
      p.removeEventListener("touchmove", onTM);
      p.removeEventListener("touchend", onTE);
    };
  }, [open]);

  return () => {
      p.removeEventListener("mousedown", onMS);
      window.removeEventListener("mousemove", onMM);
      window.removeEventListener("mouseup", onMU);
      p.removeEventListener("touchstart", onTS);
      p.removeEventListener("touchmove", onTM);
      p.removeEventListener("touchend", onTE);
    };
  }, [open]);

  return (
    <div className="fixed inset-0 z-[1000]" onClick={onClose}>
      <div className="absolute inset-0 bg-black/50"></div>
      <div
        ref={panelRef}
        className="absolute inset-x-0 bottom-0 max-h-[82vh] bg-white rounded-t-3xl shadow-2xl p-5 overflow-auto"
        onClick={(e) => e.stopPropagation()}
      >
        <div className="mx-auto mb-3 h-1.5 w-10 rounded-full bg-gray-300" />
        <div className="flex items-center justify-between">
          <h3 className="text-xl font-bold">{data.title}</h3>
        </div>
        <div className="mt-3 grid grid-cols-2 gap-3">
          <a className="block rounded-xl border border-gray-200 px-3 py-2 text-center hover:bg-gray-50" href={FLOOR_HND} target="_blank" rel="noreferrer">ÁæΩÁî∞„Éï„É≠„Ç¢„Éû„ÉÉ„Éó</a>
          <a className="block rounded-xl border border-gray-200 px-3 py-2 text-center hover:bg-gray-50" href={FLOOR_CENTRAIR} target="_blank" rel="noreferrer">„Çª„É≥„Éà„É¨„Ç¢„Éï„É≠„Ç¢„Éû„ÉÉ„Éó</a>
          <a className="col-span-2 block rounded-xl bg-gray-900 text-white px-3 py-2 text-center" href={CHECKIN_GUIDE} target="_blank" rel="noreferrer">„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥ÊñπÊ≥ï</a>
        </div>
        <p className="mt-3 text-[13px] text-gray-600">‚Äª ÈõÜÂêà„ÅØÂá∫Áô∫„ÅÆ<strong className="font-semibold">60ÂàÜÂâç</strong>„ÄÇ‰∫àÁ¥ÑÁï™Âè∑„ÉªÁ¢∫Ë™çÁï™Âè∑„ÇíÊ∫ñÂÇô„Åó„Å¶„Åä„Åè„ÄÇ</p>

        <div className="mt-4 space-y-3">
          {(mode === "out" ? FL_OUT.groups : FL_IN.groups).map((g, idx) => (
            <details key={idx} className="rounded-2xl border border-gray-200 overflow-hidden">
              <summary className="cursor-pointer px-4 py-3 font-semibold select-none">{g.label}</summary>
              <div className="px-4 pb-4 pt-1 text-[15px] leading-7 grid grid-cols-[120px_1fr] gap-x-3">
                <div className="text-gray-500">‰∫àÁ¥ÑÁï™Âè∑</div><div>{g.book}</div>
                <div className="text-gray-500">Á¢∫Ë™çÁï™Âè∑</div><div>{g.conf}</div>
                <div className="text-gray-500">Êê≠‰πóËÄÖ</div><div>{g.pax}</div>
                <div className="text-gray-500">„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥Â†¥ÊâÄ</div><div>{g.counter}</div>
              </div>
            </details>
          ))}
        </div>

        <div className="mt-5 flex justify-center">
          <button className="rounded-full bg-gray-900 text-white px-5 py-2" onClick={onClose}>Èñâ„Åò„Çã</button>
        </div>
      </div>
    </div>
  );
}

/* ===== Timeline row ===== */
const TIME_COL = 72; // px
const RAIL_COL = 20; // px
const GRID_GAP = 16; // px
const RAIL_OFFSET = -1; // tweak if blue dot not centered
const RAIL_LEFT_PX = TIME_COL + GRID_GAP + RAIL_COL / 2 + RAIL_OFFSET;

function EventRow({ ev, openMap, openFlight }) {
  return (
    <div className="grid items-center mb-8" style={{ gridTemplateColumns: `${TIME_COL}px ${RAIL_COL}px 1fr`, columnGap: `${GRID_GAP}px` }}>
      <div className="text-right font-bold text-gray-800 tabular-nums">{ev.time}</div>
      <div className="relative flex items-center justify-center">
        <div className="w-3 h-3 bg-blue-600 rounded-full" />
      </div>
      <div className="bg-white rounded-2xl shadow p-4">
        <div className="font-semibold text-gray-900 text-lg">{ev.title}</div>
        {ev.detail && <div className="text-sm text-gray-600 mt-1">{ev.detail}</div>}
        {ev.place && (
          <div className="mt-3"><Pill onClick={() => openMap(ev.place)}>Âú∞Âõ≥„ÇíÈñã„Åè</Pill></div>
        )}
        {ev.candidates && (
          <div className="mt-3">
            <div className="text-xs text-gray-500 mb-2">ÂÄôË£úÔºà„Çø„ÉÉ„Éó„Åß„Éû„ÉÉ„Éó„ÇíÈÅ∏ÊäûÔºâ</div>
            <div className="flex flex-wrap gap-2">
              {ev.candidates.map((c, i) => (
                <Pill key={i} onClick={() => openMap({ name: c.name })}>{c.name}</Pill>
              ))}
            </div>
          </div>
        )}
        {(ev.kind || ev.action) && (
          <div className="mt-3"><Pill onClick={() => (()=>{ const k = ev.kind || ev.action; const m = (k === "flight-out" || k === "outbound" || k === "out") ? "out" : "in"; openFlight(m); })()}>‰æø„ÅÆË©≥Á¥∞</Pill></div>
        )}
      </div>
    </div>
  );
}

function DaySection({ day, events, openMap, openFlight }) {
  return (
    <div className="mb-12">
      <h2 className="text-xl font-semibold mb-6 border-b pb-2">{day}</h2>
      <div className="relative">
        <div className="absolute bg-gray-300" style={{ left: `${RAIL_LEFT_PX}px`, top: 10, bottom: 10, width: 2, borderRadius: 9999 }} />
        <div>
          {events.map((ev, i) => (
            <EventRow key={i} ev={ev} openMap={openMap} openFlight={openFlight} />
          ))}
        </div>
      </div>
    </div>
  );
}

export default function App() {
  const [mapOpen, setMapOpen] = useState(false);
  const [mapPlace, setMapPlace] = useState(null);
  const [flightOpen, setFlightOpen] = useState(false);
  const [flightMode, setFlightMode] = useState("out");

  const openMap = (place) => { setMapPlace(place); setMapOpen(true); };
  const openFlight = (mode) => { setFlightMode(mode); setFlightOpen(true); };

  return (
    <div className="min-h-screen w-full flex flex-col items-center bg-gray-100 text-gray-900" style={{ paddingTop: 'calc(env(safe-area-inset-top, 0px) + 16px)' }}>
      <header className="w-full max-w-4xl px-6 md:px-8">
        <h1 className="text-3xl font-extrabold tracking-wide mt-2">Á¶èÂ≤°ÊóÖË°å</h1>
        <p className="text-sm text-gray-600 mb-6">ÊúüÈñìÔºö2025.09.19 - 2025.09.21</p>
      </header>

      <main className="w-full max-w-4xl px-6 md:px-8">
        {timeline.map((d, idx) => (
          <DaySection key={idx} {...d} openMap={openMap} openFlight={openFlight} />
        ))}
      </main>

      <footer className="mt-2 text-xs text-gray-500 text-center pb-10 px-6">
        üìå iPhone„Åß„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†ÔºöSafari„ÅßÈñã„Åè ‚Üí ÂÖ±ÊúâÔºà‚ñ°„Å´‚ÜëÔºâ‚Üí <b>„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†</b>
      </footer>

      {/* dialogs */}
      <MapDialog open={mapOpen} place={mapPlace} onClose={() => setMapOpen(false)} />
      <FlightDrawer open={flightOpen} mode={flightMode} onClose={() => setFlightOpen(false)} />
    </div>
  );
}
